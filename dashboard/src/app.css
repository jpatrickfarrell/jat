@import "tailwindcss";

/* Custom 'jat' theme - industrial dark theme matching hardcoded colors */
[data-theme='jat'] {
	color-scheme: dark;

	/* Base colors - dark blue-gray industrial palette */
	--color-base-100: oklch(22% 0.01 250);  /* main background */
	--color-base-200: oklch(18% 0.015 250); /* slightly darker */
	--color-base-300: oklch(14% 0.02 250);  /* darkest */
	--color-base-content: oklch(85% 0.02 250); /* text color */

	/* Neutral - for UI chrome */
	--color-neutral: oklch(16% 0.01 250);
	--color-neutral-content: oklch(85% 0.02 250);

	/* Primary - industrial blue accent */
	--color-primary: oklch(70% 0.18 240);
	--color-primary-content: oklch(15% 0.02 250);

	/* Secondary - muted purple complement */
	--color-secondary: oklch(50% 0.10 280);
	--color-secondary-content: oklch(90% 0.02 280);

	/* Accent - cyan highlight */
	--color-accent: oklch(75% 0.15 200);
	--color-accent-content: oklch(15% 0.02 200);

	/* Semantic colors */
	--color-info: oklch(70% 0.15 220);
	--color-info-content: oklch(15% 0.02 220);

	--color-success: oklch(65% 0.20 145);
	--color-success-content: oklch(15% 0.05 145);

	--color-warning: oklch(75% 0.15 85);
	--color-warning-content: oklch(15% 0.05 85);

	--color-error: oklch(65% 0.22 25);
	--color-error-content: oklch(95% 0.02 25);

	/* Border & radius - minimal for industrial feel */
	--radius-selector: 0.375rem;
	--radius-field: 0.25rem;
	--radius-box: 0.5rem;
	--size-selector: 0.25rem;
	--size-field: 0.25rem;
	--border: 1px;
	--depth: 1;
	--noise: 0;

	/* Animation colors - derived from semantic colors */
	/* Primary blue - entrance animations, radar, links */
	--anim-primary: oklch(0.70 0.18 240);
	--anim-primary-bright: oklch(0.80 0.18 240);
	--anim-primary-dim: oklch(0.60 0.15 240);

	/* Success green - task starting, completion */
	--anim-success: oklch(0.65 0.20 145);
	--anim-success-bright: oklch(0.70 0.22 145);
	--anim-success-dim: oklch(0.55 0.18 145);

	/* Warning amber/gold - working state, task completed badge */
	--anim-warning: oklch(0.75 0.15 85);
	--anim-warning-bright: oklch(0.80 0.18 85);
	--anim-warning-gold: oklch(0.75 0.20 85);

	/* Error red - exit animations */
	--anim-error: oklch(0.70 0.20 25);
	--anim-error-dim: oklch(0.65 0.18 25);

	/* Info cyan - agent animations */
	--anim-info: oklch(0.70 0.18 200);
	--anim-info-bright: oklch(0.85 0.18 200);
	--anim-info-highlight: oklch(0.70 0.18 220);

	/* Secondary purple - shimmer, epic */
	--anim-secondary: oklch(0.60 0.18 280);
	--anim-secondary-bright: oklch(0.70 0.20 280);
	--anim-secondary-dim: oklch(0.50 0.15 280);

	/* Base/neutral - hover states, backgrounds */
	--anim-base-hover: oklch(0.30 0.02 250);
	--anim-base-row: oklch(0.22 0.02 250);

	/* Shimmer highlight colors */
	--anim-shimmer-highlight: oklch(0.85 0.18 200);
	--anim-shimmer-bright: oklch(0.95 0.05 200);
	--anim-shimmer-slow: oklch(0.80 0.15 280);

	/* Transition colors (amber→green for working→completed) */
	--anim-transition-mid: oklch(0.80 0.18 100);
	--anim-transition-mid-border: oklch(0.80 0.20 115);
}

/* Terminal font - JetBrainsMono Nerd Font for consistent terminal appearance */
:root {
	--terminal-font: 'JetBrainsMono Nerd Font Mono', 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
	--terminal-font-size: 0.875rem; /* text-sm = 14px */
}

@plugin "daisyui" {
	themes:
		jat --default,
		light,
		dark,
		cupcake,
		bumblebee,
		emerald,
		corporate,
		synthwave,
		retro,
		cyberpunk,
		valentine,
		halloween,
		garden,
		forest,
		aqua,
		lofi,
		pastel,
		fantasy,
		wireframe,
		black,
		luxury,
		dracula,
		cmyk,
		autumn,
		business,
		acid,
		lemonade,
		night,
		coffee,
		winter,
		dim,
		nord,
		sunset;
}

/* Industrial theme utility classes */
.industrial-hover {
	transition: all 0.2s ease;
}
.industrial-hover:hover {
	background-color: var(--anim-base-hover);
	color: var(--anim-primary-bright);
}

/* Industrial row hover for tables */
.industrial-row {
	transition: all 0.15s ease;
}
.industrial-row:hover {
	background-color: var(--anim-base-row) !important;
	border-left-color: var(--anim-primary) !important;
}

/* Sidebar nav hover - brighten icon */
.industrial-hover:hover svg {
	color: var(--anim-primary) !important;
}

/* New task entrance animation */
@keyframes task-entrance {
	0% {
		opacity: 0;
		transform: translateX(-20px);
		background-color: color-mix(in oklch, var(--anim-primary) 30%, transparent);
		box-shadow: 0 0 20px color-mix(in oklch, var(--anim-primary) 40%, transparent);
	}
	50% {
		opacity: 1;
		transform: translateX(0);
		background-color: color-mix(in oklch, var(--anim-primary) 20%, transparent);
		box-shadow: 0 0 15px color-mix(in oklch, var(--anim-primary) 30%, transparent);
	}
	100% {
		opacity: 1;
		transform: translateX(0);
		background-color: transparent;
		box-shadow: none;
	}
}

.task-new-entrance {
	animation: task-entrance 1.2s ease-out forwards;
}

/* Task exit animation (for deletions) */
@keyframes task-exit {
	0% {
		opacity: 1;
		transform: translateX(0);
		background-color: transparent;
	}
	50% {
		opacity: 0.7;
		transform: translateX(10px);
		background-color: color-mix(in oklch, var(--anim-error) 20%, transparent);
	}
	100% {
		opacity: 0;
		transform: translateX(30px);
		background-color: color-mix(in oklch, var(--anim-error) 30%, transparent);
		height: 0;
		padding: 0;
		margin: 0;
		overflow: hidden;
	}
}

.task-exit {
	animation: task-exit 0.5s ease-in forwards;
}

/* Task starting work animation (green glow) */
@keyframes task-starting {
	0% {
		background-color: transparent;
		box-shadow: none;
	}
	25% {
		background-color: color-mix(in oklch, var(--anim-success-bright) 25%, transparent);
		box-shadow: 0 0 15px color-mix(in oklch, var(--anim-success-bright) 40%, transparent);
	}
	50% {
		background-color: color-mix(in oklch, var(--anim-success-bright) 15%, transparent);
		box-shadow: 0 0 10px color-mix(in oklch, var(--anim-success-bright) 30%, transparent);
	}
	100% {
		background-color: transparent;
		box-shadow: none;
	}
}

.task-starting {
	animation: task-starting 1.2s ease-out forwards;
}

/* Task completion animation (gold/yellow glow) */
@keyframes task-completed {
	0% {
		background-color: transparent;
		box-shadow: none;
	}
	25% {
		background-color: color-mix(in oklch, var(--anim-warning) 25%, transparent);
		box-shadow: 0 0 15px color-mix(in oklch, var(--anim-warning) 40%, transparent);
	}
	50% {
		background-color: color-mix(in oklch, var(--anim-warning) 15%, transparent);
		box-shadow: 0 0 10px color-mix(in oklch, var(--anim-warning) 30%, transparent);
	}
	100% {
		background-color: transparent;
		box-shadow: none;
	}
}

.task-completed {
	animation: task-completed 1.2s ease-out forwards;
}

/* Working to Completed transition animation (amber → green) */
@keyframes working-to-completed {
	0% {
		/* Start with working state (amber) */
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-warning) 15%, transparent), transparent);
		box-shadow: inset 0 0 20px color-mix(in oklch, var(--anim-warning) 20%, transparent);
		border-left-color: var(--anim-warning-bright);
	}
	30% {
		/* Brighten as transition begins */
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-transition-mid) 20%, transparent), transparent);
		box-shadow: 0 0 25px color-mix(in oklch, var(--anim-transition-mid) 40%, transparent), inset 0 0 15px color-mix(in oklch, var(--anim-transition-mid) 15%, transparent);
		border-left-color: var(--anim-transition-mid-border);
	}
	60% {
		/* Shift to green with peak glow */
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-success) 25%, transparent), transparent);
		box-shadow: 0 0 30px color-mix(in oklch, var(--anim-success-bright) 50%, transparent), inset 0 0 20px color-mix(in oklch, var(--anim-success) 20%, transparent);
		border-left-color: var(--anim-success-bright);
	}
	100% {
		/* Settle into completed state (green) */
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-success-dim) 15%, transparent), transparent);
		box-shadow: none;
		border-left-color: var(--anim-success);
	}
}

.task-working-completed {
	animation: working-to-completed 1.5s ease-out forwards;
}

/* Epic completion animation (all children done) - gold/purple triumphant glow */
@keyframes epic-completed {
	0% {
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-success-dim) 15%, transparent), transparent);
		box-shadow: none;
		border-left-color: var(--anim-success);
	}
	20% {
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-warning-gold) 30%, transparent), color-mix(in oklch, var(--anim-secondary) 15%, transparent), transparent);
		box-shadow: 0 0 30px color-mix(in oklch, var(--anim-warning-gold) 50%, transparent), inset 0 0 20px color-mix(in oklch, var(--anim-warning) 20%, transparent);
		border-left-color: var(--anim-warning-bright);
	}
	50% {
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-warning-bright) 35%, transparent), color-mix(in oklch, var(--anim-secondary-bright) 20%, transparent), transparent);
		box-shadow: 0 0 40px color-mix(in oklch, var(--anim-warning-bright) 60%, transparent), 0 0 60px color-mix(in oklch, var(--anim-secondary-bright) 30%, transparent), inset 0 0 25px color-mix(in oklch, var(--anim-warning-gold) 25%, transparent);
		border-left-color: var(--anim-warning-bright);
	}
	75% {
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-warning-gold) 25%, transparent), color-mix(in oklch, var(--anim-secondary) 10%, transparent), transparent);
		box-shadow: 0 0 25px color-mix(in oklch, var(--anim-warning-gold) 40%, transparent), inset 0 0 15px color-mix(in oklch, var(--anim-warning) 15%, transparent);
		border-left-color: var(--anim-warning-gold);
	}
	100% {
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-success-dim) 15%, transparent), transparent);
		box-shadow: none;
		border-left-color: var(--anim-success);
	}
}

.epic-completed-celebration {
	animation: epic-completed 2s ease-out forwards;
}

/* Epic running animation - subtle amber pulsing glow for active epic execution */
@keyframes epic-running {
	0%, 100% {
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-warning) 8%, transparent), transparent);
		box-shadow: inset 0 0 10px color-mix(in oklch, var(--anim-warning) 10%, transparent);
		border-left-color: var(--anim-warning-bright);
	}
	50% {
		background: linear-gradient(90deg, color-mix(in oklch, var(--anim-warning-bright) 15%, transparent), color-mix(in oklch, var(--anim-warning) 5%, transparent), transparent);
		box-shadow: inset 0 0 15px color-mix(in oklch, var(--anim-warning-bright) 20%, transparent), 0 0 8px color-mix(in oklch, var(--anim-warning) 30%, transparent);
		border-left-color: var(--anim-warning-bright);
	}
}

.epic-running {
	animation: epic-running 2s ease-in-out infinite;
	border-left: 3px solid var(--anim-warning-bright);
}

/* Radar sweep animation for empty state */
@keyframes radar-sweep {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

.radar-sweep {
	animation: radar-sweep 4s linear infinite;
}

/* Radar center pulse animation */
@keyframes radar-pulse {
	0%, 100% {
		opacity: 1;
		transform: scale(1);
		box-shadow: 0 0 10px var(--anim-primary);
	}
	50% {
		opacity: 0.7;
		transform: scale(1.3);
		box-shadow: 0 0 20px var(--anim-primary), 0 0 30px color-mix(in oklch, var(--anim-primary) 50%, transparent);
	}
}

.radar-pulse {
	animation: radar-pulse 2s ease-in-out infinite;
}

/* New agent entrance animation (scale + glow) */
@keyframes agent-entrance {
	0% {
		opacity: 0;
		transform: scale(0.8) translateY(10px);
		box-shadow: 0 0 0 0 transparent;
	}
	30% {
		opacity: 1;
		transform: scale(1.02) translateY(0);
		box-shadow: 0 0 30px 10px color-mix(in oklch, var(--anim-info) 40%, transparent);
	}
	60% {
		transform: scale(1);
		box-shadow: 0 0 20px 5px color-mix(in oklch, var(--anim-info) 20%, transparent);
	}
	100% {
		opacity: 1;
		transform: scale(1) translateY(0);
		box-shadow: 0 0 0 0 transparent;
	}
}

.agent-new-entrance {
	animation: agent-entrance 1.5s ease-out forwards;
}

/* Sparkline draw animation - line draws from left to right */
@keyframes sparkline-draw {
	from {
		stroke-dashoffset: 1;
	}
	to {
		stroke-dashoffset: 0;
	}
}

.sparkline-animate {
	stroke-dasharray: 1;
	stroke-dashoffset: 1;
	animation: sparkline-draw 0.8s ease-out forwards;
}

/* Sparkline area fade-in animation */
@keyframes sparkline-area-fade {
	from {
		opacity: 0;
	}
	to {
		opacity: 0.4;
	}
}

.sparkline-area-animate {
	opacity: 0;
	animation: sparkline-area-fade 0.8s ease-out 0.3s forwards;
}

/* Agent highlight flash animation (when navigating from task badge click) */
@keyframes agent-highlight-flash {
	0% {
		box-shadow: 0 0 0 0 transparent;
	}
	20% {
		box-shadow: 0 0 30px 10px color-mix(in oklch, var(--anim-info-highlight) 50%, transparent);
	}
	40% {
		box-shadow: 0 0 20px 5px color-mix(in oklch, var(--anim-info-highlight) 30%, transparent);
	}
	60% {
		box-shadow: 0 0 25px 8px color-mix(in oklch, var(--anim-info-highlight) 40%, transparent);
	}
	80% {
		box-shadow: 0 0 15px 3px color-mix(in oklch, var(--anim-info-highlight) 20%, transparent);
	}
	100% {
		box-shadow: 0 0 0 0 transparent;
	}
}

.agent-highlight-flash {
	animation: agent-highlight-flash 1.5s ease-out forwards;
}

/* Rocket Launch Animation */
.rocket-btn {
	position: relative;
	overflow: visible;
}

.rocket-btn .rocket-icon {
	transition: transform 0.15s ease;
}

.rocket-btn:hover:not(:disabled) .rocket-icon {
	transform: translateY(-2px);
}

/* Rocket shake before launch */
@keyframes rocket-shake {
	0%, 100% { transform: translateX(0) translateY(0); }
	10% { transform: translateX(-1px) translateY(0); }
	20% { transform: translateX(1px) translateY(-1px); }
	30% { transform: translateX(-1px) translateY(0); }
	40% { transform: translateX(1px) translateY(-1px); }
	50% { transform: translateX(-1px) translateY(0); }
	60% { transform: translateX(1px) translateY(-1px); }
	70% { transform: translateX(-1px) translateY(0); }
	80% { transform: translateX(1px) translateY(-1px); }
	90% { transform: translateX(-1px) translateY(0); }
}

/* Rocket launch upward */
@keyframes rocket-launch {
	0% {
		transform: translateY(0) scale(1);
		opacity: 1;
	}
	50% {
		transform: translateY(-15px) scale(1.1);
		opacity: 1;
	}
	100% {
		transform: translateY(-40px) scale(0.8);
		opacity: 0;
	}
}

/* Fire/exhaust animation */
@keyframes rocket-fire {
	0% {
		transform: scaleY(0.3) scaleX(1);
		opacity: 0;
	}
	20% {
		transform: scaleY(1) scaleX(1);
		opacity: 1;
	}
	50% {
		transform: scaleY(1.5) scaleX(0.8);
		opacity: 1;
	}
	100% {
		transform: scaleY(2) scaleX(0.6);
		opacity: 0;
	}
}

/* Smoke puff animation */
@keyframes rocket-smoke {
	0% {
		transform: scale(0) translateY(0);
		opacity: 0.8;
	}
	50% {
		transform: scale(1.5) translateY(5px);
		opacity: 0.4;
	}
	100% {
		transform: scale(2) translateY(10px);
		opacity: 0;
	}
}

/* Combined launching state */
.rocket-launching .rocket-icon {
	animation: rocket-shake 0.4s ease-in-out, rocket-launch 0.6s ease-in 0.4s forwards;
}

.rocket-launching .rocket-fire {
	animation: rocket-fire 0.8s ease-out 0.3s forwards;
}

.rocket-launching .rocket-smoke {
	animation: rocket-smoke 0.8s ease-out 0.2s forwards;
}

.rocket-launching .rocket-smoke-2 {
	animation: rocket-smoke 0.8s ease-out 0.35s forwards;
}

/* Terminal clickable links */
.terminal-link {
	color: var(--anim-info-highlight);
	text-decoration: underline;
	text-decoration-style: dotted;
	text-underline-offset: 2px;
	cursor: pointer;
	transition: color 0.15s ease, text-decoration-color 0.15s ease;
}

.terminal-link:hover {
	color: var(--anim-primary-bright);
	text-decoration-style: solid;
}

/* Terminal search highlight */
.terminal-search-match {
	background-color: color-mix(in oklch, var(--anim-warning-gold) 40%, transparent);
	border-radius: 2px;
	padding: 0 1px;
}

.terminal-search-match.current {
	background-color: color-mix(in oklch, var(--anim-error) 60%, transparent);
	outline: 1px solid var(--anim-error);
}

/* Agent activity shimmer effect - indicates agent is actively generating */
.shimmer-text {
	background: linear-gradient(
		90deg,
		currentColor 0%,
		currentColor 40%,
		var(--anim-shimmer-highlight) 50%,
		currentColor 60%,
		currentColor 100%
	);
	background-size: 200% 100%;
	-webkit-background-clip: text;
	background-clip: text;
	-webkit-text-fill-color: transparent;
	animation: shimmer 2s ease-in-out infinite;
	/* Remove text-shadow when shimmer is active - shadow on transparent text creates blur-only effect */
	text-shadow: none !important;
}

/* Shimmer for "generating" state - uses agent's accent color */
.shimmer-text-fast {
	background: linear-gradient(
		90deg,
		currentColor 0%,
		currentColor 35%,
		var(--anim-shimmer-bright) 50%,
		currentColor 65%,
		currentColor 100%
	);
	background-size: 200% 100%;
	-webkit-background-clip: text;
	background-clip: text;
	-webkit-text-fill-color: transparent;
	animation: shimmer 1.8s ease-in-out infinite;
	/* Remove text-shadow when shimmer is active - shadow on transparent text creates blur-only effect */
	text-shadow: none !important;
}

/* Slower shimmer for "thinking" state */
.shimmer-text-slow {
	background: linear-gradient(
		90deg,
		currentColor 0%,
		currentColor 40%,
		var(--anim-shimmer-slow) 50%,
		currentColor 60%,
		currentColor 100%
	);
	background-size: 200% 100%;
	-webkit-background-clip: text;
	background-clip: text;
	-webkit-text-fill-color: transparent;
	animation: shimmer 3s ease-in-out infinite;
	/* Remove text-shadow when shimmer is active - shadow on transparent text creates blur-only effect */
	text-shadow: none !important;
}

@keyframes shimmer {
	0% {
		background-position: 100% 0;
	}
	100% {
		background-position: -100% 0;
	}
}

/* Row shimmer for active tasks when agent is generating */
.row-shimmer {
	position: relative;
	overflow: hidden;
}

.row-shimmer::after {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: linear-gradient(
		90deg,
		transparent 0%,
		color-mix(in oklch, var(--anim-warning) 12%, transparent) 25%,
		color-mix(in oklch, var(--anim-warning-bright) 18%, transparent) 50%,
		color-mix(in oklch, var(--anim-warning) 12%, transparent) 75%,
		transparent 100%
	);
	background-size: 200% 100%;
	animation: row-shimmer 2s ease-in-out infinite;
	pointer-events: none;
}

@keyframes row-shimmer {
	0% {
		background-position: 100% 0;
	}
	100% {
		background-position: -100% 0;
	}
}
